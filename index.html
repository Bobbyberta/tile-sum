<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Play Christmas word game - Daily word challenge advent puzzle! Arrange letter tiles to form words in this festive brain teaser. Scrabble anagram game with daily challenges starting Dec 1st.">
    <meta name="keywords" content="Christmas word game, Advent puzzle, Daily word challenge, Scrabble anagram game, festive brain teaser, Dec 1st game, advent calendar puzzle, word puzzle game, anagram puzzle, daily puzzle, word game, tile puzzle, Scrabble puzzle">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://sum-tile.uk/">
    <title>Christmas Word Game - Advent Puzzle | Daily Word Challenge</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" href="/favicon.svg">
    <link rel="apple-touch-icon" href="/favicon.svg">
    
    <!-- Social Sharing Meta Tags -->
    <meta property="og:title" content="Christmas Word Game - Advent Puzzle | Daily Word Challenge">
    <meta property="og:description" content="Play Christmas word game - Daily word challenge advent puzzle! Scrabble anagram game with festive brain teaser challenges starting Dec 1st.">
    <meta property="og:image" content="https://sum-tile.uk/og-image.svg">
    <meta property="og:url" content="https://sum-tile.uk/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Christmas Word Game - Advent Puzzle | Daily Word Challenge">
    <meta name="twitter:description" content="Play Christmas word game - Daily word challenge advent puzzle! Scrabble anagram game with festive brain teaser challenges starting Dec 1st.">
    <meta name="twitter:image" content="https://sum-tile.uk/og-image.svg">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Sum Tile",
        "alternateName": "Christmas Word Game - Advent Puzzle",
        "url": "https://sum-tile.uk/",
        "description": "Christmas word game - Daily word challenge advent puzzle! Play Scrabble anagram game with festive brain teaser challenges. Daily word puzzle game where you arrange letter tiles to form words with Scrabble scoring.",
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://sum-tile.uk/?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://sum-tile.uk/"
            }
        ]
    }
    </script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E4YJ359T9L"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-E4YJ359T9L');
    </script>
    
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        .tile {
            cursor: grab;
            user-select: none;
            touch-action: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }
        .tile:active {
            cursor: grabbing;
        }
        .tile.dragging {
            opacity: 0.5;
        }
        .slot {
            min-height: 60px;
            border: 2px dashed #cbd5e1;
            transition: all 0.2s;
        }
        .slot.drag-over {
            border-color: #6366f1;
            background-color: #eef2ff;
        }
        .slot.filled {
            border: none;
            background-color: transparent;
        }
        .tile.locked {
            cursor: not-allowed;
            border: 4px solid #f59e0b;
            box-shadow: 0 0 0 2px #fef3c7;
        }
        .tile:focus {
            outline: 2px solid #6366f1;
            outline-offset: 2px;
        }
        .slot:focus {
            outline: 2px solid #6366f1;
            outline-offset: 2px;
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        .slot.locked {
            border-color: #f59e0b;
            background-color: #fef3c7;
        }
        #daily-success-modal, #daily-error-modal {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Skip to main content link -->
    <a href="#main-content" class="sr-only focus:w-auto focus:h-auto focus:p-4 focus:m-0 focus:overflow-visible focus:clip-auto focus:whitespace-normal focus:border-0 focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-indigo-600 focus:text-white focus:rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
        Skip to main content
    </a>
    <!-- Christmas Countdown Overlay -->
    <div id="countdown-overlay" class="hidden fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-indigo-600 to-indigo-700 shadow-lg border-b-2 border-indigo-800">
        <div class="container mx-auto px-4 py-4">
            <div class="text-center">
                <p class="text-white text-lg md:text-xl font-semibold">
                    <span id="countdown-text">All puzzles are locked until December 1st!</span>
                    <span id="countdown-days" class="ml-2 text-indigo-200 font-bold"></span>
                </p>
            </div>
        </div>
    </div>

    <main class="container mx-auto px-4 py-8" id="main-content">
        <header class="text-center mb-8 relative">
            <div class="absolute top-0 right-0">
                <button 
                    id="daily-help-btn"
                    class="text-indigo-900 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-2 hidden"
                    aria-label="Show help"
                >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </button>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold text-indigo-900 mb-2">Sum Tile</h1>
            <p class="text-lg text-indigo-900" id="header-subtitle">Christmas Advent Calendar Edition</p>
            <p id="test-mode-indicator" class="hidden mt-2 text-sm text-orange-600 font-semibold"></p>
        </header>

        <!-- Advent Calendar View (shown before Dec 26) -->
        <div id="calendar-container">
            <div id="calendar" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 max-w-4xl mx-auto">
                <!-- Calendar days will be generated by JavaScript -->
            </div>
        </div>

        <!-- Daily Puzzle View (shown from Dec 26 onwards) -->
        <div id="daily-puzzle-container" class="hidden max-w-4xl mx-auto">
            <!-- Puzzle Header -->
            <header class="mb-8">
                <h2 class="text-3xl md:text-4xl font-bold text-indigo-900 hidden" id="daily-puzzle-title">
                    <!-- Title will be set by JavaScript but hidden -->
                </h2>
            </header>

            <!-- Tiles Container -->
            <div class="mb-8">
                <h2 class="sr-only">Available Tiles</h2>
                <div id="daily-tiles-container" class="flex flex-wrap gap-3 p-4 bg-white rounded-lg shadow-md min-h-[100px]">
                    <!-- Tiles will be generated by JavaScript -->
                </div>
            </div>

            <!-- Puzzle Slots -->
            <div class="mb-8">
                <h2 class="sr-only">Word Slots</h2>
                <div id="daily-word-slots" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Word slots will be generated by JavaScript -->
                </div>
            </div>

            <!-- Hint and Submit Buttons -->
            <div class="mb-8 flex flex-col sm:flex-row gap-4">
                <button 
                    id="daily-hint-btn" 
                    class="w-full md:w-auto px-8 py-3 bg-amber-500 text-white font-semibold rounded-lg hover:bg-amber-600 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                >
                    Get Hint
                </button>
                <button 
                    id="daily-submit-btn" 
                    class="w-full md:w-auto px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors"
                >
                    Submit Solution
                </button>
            </div>

            <!-- Feedback Message -->
            <div id="daily-feedback" class="hidden p-4 rounded-lg mb-8" role="alert" aria-live="polite">
                <!-- Feedback will be shown here -->
            </div>
            
            <!-- View Archive Link -->
            <nav class="mt-8 text-center" aria-label="Archive navigation">
                <a href="archive.html" id="daily-archive-link" class="text-indigo-600 hover:text-indigo-800 font-semibold inline-block">
                    View Archive â†’
                </a>
            </nav>
        </div>
    </main>

    <script type="module">
        // Initialize page on load
        import { updateCountdown, initCalendar, initDailyPuzzle, isAdventMode } from './script.js';
        import { hasSeenHelp } from './js/completion.js';
        import { showHelpModal, closeHelpModal } from './js/modals.js';
        
        document.addEventListener('DOMContentLoaded', () => {
            // Setup help modal button handlers (needed for first visit auto-show)
            const closeHelpModalBtn = document.getElementById('close-help-modal-btn');
            const closeHelpModalX = document.getElementById('close-help-modal');
            if (closeHelpModalBtn) {
                closeHelpModalBtn.addEventListener('click', closeHelpModal);
            }
            if (closeHelpModalX) {
                closeHelpModalX.addEventListener('click', closeHelpModal);
            }
            
            // Close help modal when clicking outside
            const helpModal = document.getElementById('help-modal');
            if (helpModal) {
                helpModal.addEventListener('click', (e) => {
                    if (e.target === helpModal) {
                        closeHelpModal();
                    }
                });
            }
            
            // Check for test mode and show indicator
            const urlParams = new URLSearchParams(window.location.search);
            const testValue = urlParams.get('test');
            const indicator = document.getElementById('test-mode-indicator');
            
            if (testValue === 'archive') {
                if (indicator) {
                    indicator.textContent = 'ðŸ§ª Test Mode: Archive Mode';
                    indicator.classList.remove('hidden');
                }
            } else if (testValue === 'advent') {
                if (indicator) {
                    indicator.textContent = 'ðŸ§ª Test Mode: Advent Calendar Mode';
                    indicator.classList.remove('hidden');
                }
            }
            
            // Update countdown (will hide if not needed)
            updateCountdown();
            
            // Check mode and initialize accordingly
            // Archive test mode forces daily puzzle view
            if (testValue === 'archive') {
                initDailyPuzzle();
            } else if (isAdventMode()) {
                // Show calendar (advent mode or advent test mode)
                initCalendar();
            } else {
                // Show today's puzzle (daily mode)
                initDailyPuzzle();
            }
            
            // Show help modal on first visit
            if (!hasSeenHelp()) {
                // Use requestAnimationFrame to ensure DOM is fully ready
                requestAnimationFrame(() => {
                    showHelpModal();
                });
            }
        });
    </script>

    <!-- Success Modal for Daily Puzzle -->
    <div id="daily-success-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" role="dialog" aria-modal="true" aria-labelledby="daily-modal-title">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-md w-full mx-4 relative">
            <button 
                id="daily-close-success-modal"
                class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-1"
                aria-label="Close modal"
            >
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <h2 id="daily-modal-title" class="text-3xl font-bold text-indigo-900 mb-4 text-center">You solved the puzzle!</h2>
            <div id="daily-share-message-container" class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                <p id="daily-share-message" class="text-sm text-gray-700 whitespace-pre-wrap break-words"></p>
            </div>
            <div class="flex justify-center gap-4">
                <button 
                    id="daily-share-btn"
                    class="px-8 py-3 bg-amber-500 text-white font-semibold rounded-lg hover:bg-amber-600 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                >
                    Copy
                </button>
            </div>
        </div>
    </div>

    <!-- Error Modal for Daily Puzzle -->
    <div id="daily-error-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" role="dialog" aria-modal="true" aria-labelledby="daily-error-modal-title">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-md w-full mx-4 relative">
            <button 
                id="daily-close-error-modal"
                class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-1"
                aria-label="Close modal"
            >
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <h2 id="daily-error-modal-title" class="text-3xl font-bold text-red-900 mb-4 text-center">Not quite right</h2>
            <p class="text-lg text-red-800 mb-6 text-center">Try again!</p>
            <div class="flex justify-center">
                <button 
                    id="daily-close-error-modal-btn"
                    class="px-8 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors"
                >
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Help Modal (shared with puzzle.html) -->
    <div id="help-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" role="dialog" aria-modal="true" aria-labelledby="help-modal-title">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] flex flex-col">
            <!-- Sticky Header -->
            <div class="sticky top-0 bg-white rounded-t-lg border-b border-gray-200 px-6 md:px-8 pt-6 md:pt-8 pb-4 z-10">
                <div class="flex items-center justify-between">
                    <h2 id="help-modal-title" class="text-2xl font-bold text-indigo-900">How to Play</h2>
                    <button 
                        id="close-help-modal"
                        class="text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-full p-1"
                        aria-label="Close modal"
                    >
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- Scrollable Content -->
            <div id="help-modal-content" class="overflow-y-auto px-6 md:px-8 pt-6 md:pt-8 pb-6 md:pb-8">
                <!-- Step 1: Tile Appearance -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-indigo-900 mb-3">1. Understand the Tiles</h3>
                    <p class="text-indigo-900 mb-3">Each tile shows a letter and its Scrabble point value.</p>
                    <div class="flex items-center gap-3 mb-2">
                        <div class="bg-indigo-600 text-white rounded-lg p-3 w-14 h-14 flex flex-col items-center justify-center shadow-md">
                            <div class="text-2xl font-bold">A</div>
                            <div class="text-xs mt-1 opacity-90">1</div>
                        </div>
                        <div class="bg-indigo-600 text-white rounded-lg p-3 w-14 h-14 flex flex-col items-center justify-center shadow-md">
                            <div class="text-2xl font-bold">Q</div>
                            <div class="text-xs mt-1 opacity-90">10</div>
                        </div>
                        <div class="bg-indigo-600 text-white rounded-lg p-3 w-14 h-14 flex flex-col items-center justify-center shadow-md">
                            <div class="text-2xl font-bold">Z</div>
                            <div class="text-xs mt-1 opacity-90">10</div>
                        </div>
                    </div>
                    <p class="text-sm text-indigo-900">The large letter is what you use to form words. The small number is the Scrabble score.</p>
                </div>

                <!-- Step 2: Dragging Tiles -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-indigo-900 mb-3">2. Drag Tiles to Slots</h3>
                    <p class="text-indigo-900 mb-3">Click and drag tiles from the top container into the word slots below.</p>
                    <div class="flex items-center gap-4 mb-2 flex-wrap">
                        <div class="bg-indigo-600 text-white rounded-lg p-3 w-14 h-14 flex flex-col items-center justify-center shadow-md relative">
                            <div class="text-2xl font-bold">T</div>
                            <div class="text-xs mt-1 opacity-90">1</div>
                            <!-- Drag cursor indicator -->
                            <div class="absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center">
                                <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path>
                                </svg>
                            </div>
                        </div>
                        <!-- Arrow SVG -->
                        <svg class="w-8 h-8 text-indigo-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                        <!-- Empty slot -->
                        <div class="w-14 h-14 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300 bg-gray-50">
                            <span class="text-gray-400 text-xs">Slot</span>
                        </div>
                    </div>
                    <p class="text-sm text-indigo-900">You can also click a tile, then click a slot to place it. Use keyboard navigation for accessibility.</p>
                </div>

                <!-- Step 3: Completed Word -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-indigo-900 mb-3">3. Form Words</h3>
                    <p class="text-indigo-900 mb-3">Arrange tiles to form two words that match the scrabble score value.</p>
                    <div class="bg-white rounded-lg shadow-md p-4 mb-2">
                        <div class="flex flex-col sm:flex-row sm:items-center gap-2 mb-3">
                            <span class="text-sm font-semibold text-indigo-900 whitespace-nowrap">Word 1:</span>
                            <div class="flex gap-1">
                                <div class="bg-indigo-600 text-white rounded-lg p-2 w-12 h-12 flex flex-col items-center justify-center shadow-md">
                                    <div class="text-xl font-bold">C</div>
                                    <div class="text-xs opacity-90">3</div>
                                </div>
                                <div class="bg-indigo-600 text-white rounded-lg p-2 w-12 h-12 flex flex-col items-center justify-center shadow-md">
                                    <div class="text-xl font-bold">A</div>
                                    <div class="text-xs opacity-90">1</div>
                                </div>
                                <div class="bg-indigo-600 text-white rounded-lg p-2 w-12 h-12 flex flex-col items-center justify-center shadow-md">
                                    <div class="text-xl font-bold">T</div>
                                    <div class="text-xs opacity-90">1</div>
                                </div>
                            </div>
                            <span class="text-sm text-indigo-900 sm:ml-2">Score: 5</span>
                        </div>
                        <div class="flex flex-col sm:flex-row sm:items-center gap-2">
                            <span class="text-sm font-semibold text-indigo-900 whitespace-nowrap">Word 2:</span>
                            <div class="flex gap-1">
                                <div class="bg-indigo-600 text-white rounded-lg p-2 w-12 h-12 flex flex-col items-center justify-center shadow-md">
                                    <div class="text-xl font-bold">D</div>
                                    <div class="text-xs opacity-90">2</div>
                                </div>
                                <div class="bg-indigo-600 text-white rounded-lg p-2 w-12 h-12 flex flex-col items-center justify-center shadow-md">
                                    <div class="text-xl font-bold">O</div>
                                    <div class="text-xs opacity-90">1</div>
                                </div>
                                <div class="bg-indigo-600 text-white rounded-lg p-2 w-12 h-12 flex flex-col items-center justify-center shadow-md">
                                    <div class="text-xl font-bold">G</div>
                                    <div class="text-xs opacity-90">2</div>
                                </div>
                            </div>
                            <span class="text-sm text-indigo-900 sm:ml-2">Score: 5</span>
                        </div>
                    </div>
                    <p class="text-sm text-indigo-900">Fill all slots for both words, then submit to check your solution!</p>
                </div>

                <!-- Close Button -->
                <div class="flex justify-center pt-4 border-t border-gray-200 mt-6">
                    <button 
                        id="close-help-modal-btn"
                        class="px-8 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors"
                    >
                        Got it
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

